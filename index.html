<!DOCTYPE HTML>
<!-- Solid State by @n33co -->
<html>
	<head>
		<script type="text/javascript">    var host = "fastur.ca";    if ((host == window.location.host) && (window.location.protocol != "https:"))        window.location.protocol = "https";		</script>
		<title>Fastur</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="//fastur.ca/main.css"/>
		<script src="//cdn.auth0.com/js/lock-7.9.min.js"></script>
		<script src="https://cdn.jsdelivr.net/g/skeljs@0.4.6,jquery@3.0.0-alpha1,medium-editor@5.9.0,html5shiv@3.7.3"></script>
		<script src="//cdnjs.cloudflare.com/ajax/libs/annyang/2.0.0/annyang.min.js"></script>
		<script src="https://cdn.firebase.com/js/client/2.3.1/firebase.js"></script>
		<script src="https://checkout.stripe.com/checkout.js"></script>
		<script type="text/javascript" src="https://mandrillapp.com/api/docs/js/mandrill.js"></script>
	</head>
	<body>
			<div id="page-wrapper">
				<header id="header">
						<nav>
							<a href="#menu" class="btn-login">Sign in</a>
						</nav>
					</header>
				<!-- Banner -->
					<section id="banner">
						<div class="inner">
						<div id="landing">
							<div class="logo"><span><img src="https://res.cloudinary.com/lln42o2ke/image/upload/v1445016435/FasturLogoWhite_xed16t.png" alt="Fastur" class="fastur" ></span></div>
							<h2>We help founders <br>build self governing products.</h2>
							<p>Our platform deals with data so you can focus on creating great experiences.</p>
					</div>
					<div id="paperwrapper" style="display: none;">
					<p id="paper" class="editable" placeholder="USE THIS SPACE TO OUTLINE YOUR PROJECT. <br> WHEN YOU SAVE, A TEAM MEMBER WILL RECEIVE YOUR PAPER AND BEGIN WORKING ON AN MVP FOR YOU IMMEDIATELY. </p>">Title
<br><br>
					</div>
					<div id="settings" style="display: none;">
										<h3 class="major"><a href="#"  id="gotopaper" class=" fa fa-paper button fit special">go back to Paper</a></h3>
										<form method="post" action="#">
											<div class="row uniform">
												<div class="6u 12u$(xsmall)">
													<label for="demo-name">Name</label>
													<input type="text" name="demo-name" id="demo-name" value="" />
												</div>
												<div class="6u$ 12u$(xsmall)">
													<label for="demo-email">Email</label>
													<input type="email" name="demo-email" id="demo-email" value="" />
												</div>
												<div class="12u$">
													<label for="demo-email">Full Address</label>
													<input type="email" name="demo-email" id="demo-address" value="" />
												</div>
												</div>
					
												</div>
										</form>
									</div>
									<!--end of settings-->
									
									
					</div>
					</section>
				<!-- Wrapper -->
					<section id="wrapper">

						<!-- One -->
							<section id="one" class="wrapper spotlight style1">
								<div class="inner">
									<div class="content">
										<h2 class="major">instant infrastructure</h2>
										<p>Securely handle global traffic, instantly.</p>
									</div>
								</div>
							</section>

						<!-- Two -->
							<section id="two" class="wrapper alt spotlight style2">
								<div class="inner">
									<div class="content">
										<h2 class="major">on demand everything</h2>
										<p>
										Build lean with resources available on demand.</p>
									</div>
								</div>
								</section>
								
								<section id="landingpapers" class="wrapper alt style1">
								<div class="inner">
									<h2 class="major">Papers&nbsp;<i class="fa fa-spinner fa-spin"></i></h2>
									<section id="papers" class="features">
									</section>
									<section id="output" class="features">
									<section>
								</div>
							</section>
					<section id="price" class="wrapper alt spotlight style3">
						<div class="inner">
				              <div class="content"> 
				              <h2 class="major">Price</h2>
							<table>
											<thead>
											
											</thead>
											<tbody>
										    		<tr>
													<td>Starter</td>
													<td>One Public Project</td>
                                                        <td><a href="#"  id="starterbutton" class=" button fit btn-login">free forever</a></td>
                                                      
											</tr>
												<tr>
													<td>Team</td>
													<td>Privacy + Team Collaboration</td>
                                                        <td><a href="#"  id="teambutton" class="button fit special">$25.00/m</a></td>
												</tr>
												<tr>
													<td>Enterprise</td>
													<td>Co-build with us from ideation to maturation</td>
                                                        <td><a class="discuss button fit special">contact us</a></td>
												</tr>                                    
											</tbody>
										
										</table>
                                                                          
									</div>

									</div>
                        </header>
					</section>
							</section>
					</section>
				<!-- Footer -->
						<section id="footer">
							<div class="inner">
			
							<ul id="landingfooter" class="copyright">
								<li>&copy; 2015 <a href="https://fastur.ca">Fastur Inc. </a> All rights reserved.</li>
							</ul>
							<ul id="paperfooter" class="copyright" style="display: none;">
								<li>
								<a id="logintosave" class="button small btn-login special" type="submit">sign in and save</a>
								<a id="save" style="display: none;" onclick="Toss()" class="button small" type="submit">save</a>
								<a id="sendmail" style="display: none;" style="display: none;" onclick="sendTheMail();" class="button small" type="submit">send</a>
								</li>
								<li><a id="settingsicon" style="display: none;" class="fa fa-cogs"></a></li>
							</ul>
									<section id="history" class="features" style="display: none;">
									</section>
							<span id="functions" style="display: none;"></span>

							</div>
							
					</section>
					

			</div>
	<!-- Scripts -->
<script>
var editor = new MediumEditor('.editable');
editor.subscribe('editableInput', function (event, editable) {
alert("working");
	
});
</script>




<script>
  if (annyang) {
  uid = localStorage.getItem("uid");
  var commands = {
    '*term': function(term) {
$("#paper").append(" " + term);
var url = "https://vct.firebaseio.com/" + uid; 
var firebaseRef = new Firebase(url); 
var postRef = firebaseRef.push(); 
postRef.set({papervct: term});
    }
  };
  annyang.addCommands(commands);
}
</script>

<script>
$('.discuss').click(function(e){
var txt = $(e.target).text();
document.getElementById("paper").innerText = "Discuss Opportunities";

$("#header").css("display", "none");
$("#landingpapers").css("display", "none");
$("#price").css("display", "none");
$("#one").css("display", "none");
$("#two").css("display", "none");
$("#landing").css("display", "none");
$("#logintosave").css("display", "none");
$("#sendmail").css("display", "block");
$("#landingfooter").css("display", "none");
$("#paperfooter").css("display", "block");
$("#paperwrapper").css("display", "block");
annyang.start();

});
</script>

<script>
$(".fastur").click(function() {
$("#header").css("display", "none");
$("#landingpapers").css("display", "none");
$("#price").css("display", "none");
$("#one").css("display", "none");
$("#two").css("display", "none");
$("#landing").css("display", "none");
$("#landingfooter").css("display", "none");
$("#paperfooter").css("display", "block");
$("#paperwrapper").css("display", "block");
annyang.start();
});
</script>

<script>
var lock = null;
$(document).ready(function() {
   lock = new Auth0Lock('ZPJad5hCZV8SilXZeARGfgSUqXj9ONN8', 'xlynkz.auth0.com');
});

var userProfile;
$('.btn-login').click(function(e) {
  e.preventDefault();
  lock.show(function(err, profile, token) {
    if (err) {
      alert('There was an error');
    } else {
      // Success callback
$("#logintosave").css("display", "none");
$("#header").css("display", "none");
$("#one").css("display", "none");
$("#two").css("display", "none");
$("#price").css("display", "none");
$("#landing").css("display", "none");
$("#landingfooter").css("display", "none");
$("#landingpapers").css("display", "none");
$("#save").css("display", "block");
$("#history").css("display", "block");
$("#settingsicon").css("display", "block");
$("#paperwrapper").css("display", "block");
$("#paperfooter").css("display", "block");

      // Save the JWT token.
      localStorage.setItem('userToken', token);

      // Save the profile
      userProfile = profile;
      uid = profile.user_id;
      localStorage.setItem("uid", uid);
      
      //get their paper
    	  var ref = new Firebase("https://vct.firebaseio.com/" + uid);
       ref.on("value", function(snapshot) {
       	  var allPost = snapshot.val();
       document.getElementById("paper").innerText = allPost.papervct;
       });
       
       
       var ref = new Firebase("https://vct.firebaseio.com/public" );

ref.once("value", function(snapshot) {
  // The callback function will get called twice, once for "fred" and once for "barney"
   
  snapshot.forEach(function(childSnapshot) {
    // key will be "fred" the first time and "barney" the second time
    var key = childSnapshot.key();
    // childData will be the actual contents of the child
    var childData = childSnapshot.val();
    var title = childData.titlevct;
    var paper = childData.papervct;
    $("#history").append("<article>"+"<h3 class='major papers'>"+title+"</h3>"+"</article>");
  });
});
       annyang.start();

    }
  });
});

</script>
<script>
function Toss() {
           	userid = localStorage.getItem("uid");
           	senddate = localStorage.getItem("date");
           	var first_line = $("#paper")
           	.contents()
           	.filter(function() {return !!$.trim(this.innerHTML||this.data);})
           	.first();
var titlevct = first_line.text(); 
var papervct = document.getElementById("paper").innerText; 
var paperurl = "https://vct.firebaseio.com/" + userid;
var firebaseRef = new Firebase(paperurl); 
var postRef = firebaseRef.push(); 
firebaseRef.set({papervct: papervct, titlevct: titlevct}); 
//public
var vcturl = "https://vct.firebaseio.com/public"; 
var firebaseRef = new Firebase(vcturl); 

// The ideantifier in the collection.
var uid = userid;
// the data for the object being created/updated.
var user = {
    name: titevct,
    paper: papervct
};
// attempt to get the child in the collection by uid.
firebaseRef.child('users').child(uid).once('value', function(snapshot){
    // if data exists
    if (snapshot.exists()) {
        // get the ref (in this case /users/2) and update its contents
        snapshot.ref().update(user);
    } else {
        // data does not exist so we wrap the data in an object with
        // a member named after the uid so we can pass it as an update
        // to the parent.
        var payload = {};
            payload[uid] = user;
        // get the ref's parent and call update on it.
        snapshot.ref().parent().update(payload);
    }
});
};

</script>

<script>
/*get public papers + date*/
$(document).ready(function(){  
   Date.prototype.yyyymmdd = function() {
   var yyyy = this.getFullYear().toString();
   var mm = (this.getMonth()+1).toString(); // getMonth() is zero-based
   var dd  = this.getDate().toString();
   return (mm[1]?mm:"0"+mm[0]) + (dd[1]?dd:"0"+dd[0]) + yyyy; // padding
  };
d = new Date();
dt = d.yyyymmdd();
localStorage.setItem('date', dt);

var ref = new Firebase("https://vct.firebaseio.com/public" );
ref.once("value", function(snapshot) {
  snapshot.forEach(function(childSnapshot) {
    var key = childSnapshot.key();
    var childData = childSnapshot.val();
    var title = childData.titlevct;
    var paper = childData.papervct;
          $("#papers").append("<article>"+"<h3 class='major papers'>"+title+"</h3>"+"</article>");
  });
});
});
</script>
<script>
//loading a clicked history
$('#papers').click(function(e){
var txt = $(e.target).text();
document.getElementById("paper").innerText = txt;
});
</script>
<script>
$('#papers').click(function(e){
var txt = $(e.target).text();
document.getElementById("paper").innerText = txt;
$("#header").css("display", "none");
$("#landingpapers").css("display", "none");
$("#price").css("display", "none");
$("#one").css("display", "none");
$("#two").css("display", "none");
$("#landing").css("display", "none");
$("#landingfooter").css("display", "none");
$("#paperfooter").css("display", "block");
$("#paperwrapper").css("display", "block");
annyang.start();
});
</script>
     <script>
        $("#settingsicon").click( function()
           { 
$("#paperfooter").css("display", "none");
$("#paperwrapper").css("display", "none");
$("#settings").css("display", "block");
$("#price").css("display", "block");
$("#history").css("display", "none");

} 
        );
    </script>
    
<script>
  var handler = StripeCheckout.configure({
    key: 'pk_live_mdufsEUxVMK742qsZEJz4keg',
    image: 'https://res.cloudinary.com/lln42o2ke/image/upload/v1445016435/FasturLogoWhite_xed16t.png',
    locale: 'auto',
    token: function(token) {
      // Use the token to create the charge with a server-side script.
      // You can access the token ID with `token.id`
    }
  });

  $('#teambutton').on('click', function(e) {
    // Open Checkout with further options
    handler.open({
      name: 'Team Plan',
      description: '$25/m (billed annually)',
      currency: "cad",
      amount: 30000
    });
    e.preventDefault();
  });  
  
  // Close Checkout on page navigation
  $(window).on('popstate', function() {
    handler.close();
  });
</script>
<script> 
$("#gotopaper").click(function(e) {
$("#header").css("display", "none");
$("#one").css("display", "none");
$("#two").css("display", "none");
$("#settings").css("display", "none");
$("#landing").css("display", "none");
$("#price").css("display", "none");
$("#landingfooter").css("display", "none");
$("#paperfooter").css("display", "block");
$("#paperwrapper").css("display", "block");
annyang.start();
  });
  </script>
   <script>
//listing
var ref = new Firebase("https://vct.firebaseio.com/console");
ref.on("child_added", function(snapshot, prevChildKey) {
  var newPost = snapshot.val();
 var consolefn = (newPost.consolefn);
document.getElementById("functions").innerText = consolefn;
});
</script>


<script>

// Create a function to log the response from the Mandrill API
function log(obj) {
    $('#response').text(JSON.stringify(obj));
}

// create a new instance of the Mandrill class with your API key
var m = new mandrill.Mandrill('nG0ZXR7rdE4oLOCEqaVQYw');

// create a variable for the API call parameters
var params = {
    "message": {
        "from_email":"your_email_address",
        "to":[{"email":"your_recipient_address"}],
        "subject": "Sending a test email from the Mandrill API",
        "text": "I'm learning the Mandrill API at Codecademy."
    }
};

function sendTheMail() {
// Send the email!

    m(params, function(res) {
        log(res);
    }, function(err) {
        log(err);
    });
}
</script>

  </body>
</html>
